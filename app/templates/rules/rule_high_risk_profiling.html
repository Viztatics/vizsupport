{% extends "appbuilder/base.html" %}
{% import 'appbuilder/general/lib.html' as lib %}
{% block head_css %}
    {{ super() }}
    <link rel="stylesheet" href="{{url_for('static',filename='assets/node_modules/bootstrap-table/dist/bootstrap-table.min.css')}}"></link>
    <link rel="stylesheet" href="{{url_for('static',filename='assets/node_modules/jquery-file-upload/css/uploadfile.css')}}"></link>
    <style type="text/css">
    	label.error{
    		color:red;
    		margin-left: 10px;
    	}
    </style>
{% endblock %}

{% block content %}
	{{ lib.panel_begin(transCode+' Activity Profiling') }}
		<div class="panel panel-default">
		  <div class="panel-heading" style="background-color: #dff0d8;">Query Area</div>
		  <div class="panel-body">
		    <form id="highRiskCtyForm">
		        <div class="form-group form-inline">
		            <div class="col-md-2 input-group"><label for="reportPath">Choose your data file</label><a href="../../static/csv/rules/Trans_Min_High_Risk_Transfer.xlsx" target="_blank" id="filelink">Sample File</a></div>
		            <div class="col-md-4 input-group" id="reportPath" data-keyname={{keyname}}>Upload</div>
		            <div class="col-md-12 input-group"><font color='red'> * Upload CSV file with Following data elements in the specific sequence : [ACCOUNT_KEY,YearMonth,TRANS_AMT,Credit+TRANS_CNT,Credit+TRANS_AMT,Debit+TRANS_CNT,Debit+TRANS_AMT]</font></div>		            
		        </div>		        
		        <div class="form-group form-inline">
		            <div class="col-md-2 input-group"><label for="amtThreshNum">Amount Threshold</label></div>
		            <div class="col-md-4 input-group">
		            	<input class="form-control" type="number" class="" maxlength="8" id="amtThreshNum" name="amtThreshNum" placeholder="1000" value="1000">
		            </div>
		        </div>
		        <div class="form-group form-inline">
		            <div class="col-md-2 input-group"><label for="cntThreshNum">Count Threshold</label></div>
		            <div class="col-md-4 input-group">
		            	<input class="form-control" type="number" class="" maxlength="8" id="cntThreshNum" name="cntThreshNum" placeholder="5" value="5">
		            </div>
		        </div>
		        <div class="form-group form-inline">
		            <div class="col-md-2 input-group"><label for="minSD">Minimun Standard Deviation</label></div>
		            <div class="col-md-4 input-group">
		            	<input class="form-control" type="number" class="" maxlength="8" id="minSD" name="minSD" placeholder="3" value="3">
		            </div>
		        </div>
		        <!--
		        <div class="form-group form-inline">
		            <div class="col-md-2 input-group"><label for="monNum">Number of Historical Months</label></div>
		            <div class="col-md-4 input-group">
		            	<input class="form-control" type="number" class="" maxlength="8" id="monNum" name="monNum" placeholder="7" value="">
		            </div>
		        </div>
		    	-->
		    	<input type='hidden' id="clickAccount" name="clickAccount" value="">
		        <div class="form-group form-inline">
		        	<div class="col-md-offset-2 col-md-2 input-group">
		            	<button type="submit" class="btn btn-primary">Submit</button>
		        	</div>
		        </div>
		    </form>
		  </div>
		</div>

		<div class="panel panel-default">
		  <div class="panel-heading" style="background-color: #dff0d8;">Statistics on Data</div>
		  <div class="panel-body">
		  	<div class="form-group form-inline">
	            <div class="col-md-2 input-group"><label for="isOutlier">Include Outlier</label></div>
	            <div class="col-md-4 input-group">
	            	<select class="form-control" id="isOutlier">
					  <option value="1" selected="selected">Yes</option>
					  <option value="0">No</option>
					</select>
	            </div>		            
		    </div>		    
		    <div class="row">
		        <table id="statisticsAmountTable"></table>
		    </div>
		    <div class="row">
		        <div id="percentileAmountChart" style="height:600px"></div>
		    </div>
		    <div class="row">
		        <div id="paretoAmountChart" style="height:600px"></div>
		    </div>
		    <div class="row">
		        <table id="statisticsCountTable"></table>
		    </div>
		    <div class="row">
		        <div id="percentileCountChart" style="height:600px"></div>
		    </div>
		    <div class="row">
		        <div id="paretoCountChart" style="height:600px"></div>
		    </div>
		  </div>
		</div>

		<div class="panel panel-default">
		  <div class="panel-heading" style="background-color: #dff0d8;">Scatter Plot</div>
		  <div class="panel-body">
		    <div class="row">
		        <div id="scatterChart" style="height:600px"></div>
		    </div>
		  </div>
		</div>

		<div class="panel panel-default">
		  <div class="panel-heading" style="background-color: #dff0d8;">Alert Table</div>
		  <div class="panel-body">
		    <div class="row">
		        <table id="alertTable" data-show-export="true"></table>
		    </div>
		  </div>
		</div>

		<!-- Modal -->
		<div class="modal" id="scatterModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
		  <div class="modal-dialog modal-lg" role="document">
		    <div class="modal-content">
		      <div class="modal-header">
		        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
		        <h4 class="modal-title" id="myModalLabel">Historical Current</h4>
		      </div>
		      <div class="modal-body">
		      	<div id="profilingChart" style="height:600px"></div>
		      </div>
		      <div class="modal-footer">
		        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
		      </div>
		    </div>
		  </div>
		</div>

	{{ lib.panel_end() }}
{% endblock %}

{% block tail_js %}
	  {{super()}}
    <script type="text/javascript">
      $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
    </script>
    <script src="{{url_for('static',filename='assets/node_modules/bootstrap-table/dist/bootstrap-table.min.js')}}"></script>
    <script src="{{url_for('static',filename='assets/node_modules/bootstrap-table/dist/extensions/export/bootstrap-table-export.min.js')}}"></script>
    <script src="//rawgit.com/hhurz/tableExport.jquery.plugin/master/tableExport.js"></script>
    <script src="{{url_for('static',filename='assets/node_modules/jquery-file-upload/js/jquery.uploadfile.js')}}"></script>
    <script src="{{url_for('static',filename='assets/node_modules/jquery-validation/dist/jquery.validate.js')}}"></script>
    <script src="{{url_for('static',filename='assets/node_modules/echarts/dist/echarts.min.js')}}"></script>    
    <script src="{{url_for('static',filename='assets/javascript/rules/rule_high_risk_profiling.js')}}"></script>
{% endblock %}